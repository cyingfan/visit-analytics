angular.module("RDash",["ui.bootstrap","ui.router","ngCookies","angular-capitalize-filter","highcharts-ng"]);
"use strict";angular.module("RDash").config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("overview",{url:"/",templateUrl:"templates/dashboard.html"}).state("tables",{url:"/tables",templateUrl:"templates/tables.html"}).state("average",{url:"/average",templateUrl:"templates/average.html"}).state("percentage",{url:"/percentage",templateUrl:"templates/percentage.html"}).state("details",{url:"/details",templateUrl:"templates/details.html"})}]);
angular.module("RDash").controller("AverageCtrl",["$scope",function(e){var a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t={title:{text:""},options:{xAxis:{categories:[]},yAxis:{title:{text:"Visits"},plotLines:[{value:0,width:1,color:"#404040"}]},legend:{enabled:!1},plotOptions:{line:{dataLabels:{enabled:!0}}}},series:[{name:"",data:[]}]};e.periodType="day",e.loadGraph=function(){"day"==e.periodType?(t.title.text="Average By Weekday",t.options.xAxis.categories=a,t.series[0].name="byWeekDay",t.series[0].data=e.rawData.avg_days):"hour"==e.periodType&&(t.title.text="Average By Hour",t.options.xAxis.categories=e.rawData.avg_hours.keys(),t.series[0].name="byHour",t.series[0].data=e.rawData.avg_hours)},e.highChartsNg=t,e.loadGraph(),e.$watch("periodType",function(a,t){a!==t&&e.loadGraph()})}]);
angular.module("RDash").controller("DetailsCtrl",["$scope","$filter",function(a,e){var t={title:{text:"Visit Details"},options:{xAxis:{type:"datetime"},yAxis:{title:{text:"Visits"},type:"logarithmic",plotLines:[{value:0,width:1,color:"#404040"}]},plotOptions:{line:{dataLabels:{enabled:!0}}},legend:{layout:"vertical",align:"right",verticalAlign:"top",borderWidth:0,floating:!0}},series:[]},n=["walkby","bounce","qualified","engaged","once","seen","freq","potential","pep","pev"];a.dimensions={};for(i in n)a.dimensions[n[i]]=!1;a.dimensions.freq=!0;var o={name:"",data:[],id:""};a.loadGraph=function(){var n={},s=[];for(i in a.rawData.visits){var l=a.rawData.visits[i],r=new Date(l.ts).getTime();angular.forEach(a.dimensions,function(i,a){i&&(n[a]||(n[a]=[]),n[a].push([r,l[a]]))},n)}angular.forEach(n,function(i,a){var t=angular.copy(o);t.data=i,t.name=e("capitalize")(a),t.id=t.name,s.push(t)},s),t.series=s},a.loadGraph(),a.highChartsNg=t,a.$watch("dimensions",function(i,e){i!==e&&a.loadGraph()},!0)}]);
function MasterCtrl(t,e,o,g){var n=992;t.getWidth=function(){return window.innerWidth},t.$watch(t.getWidth,function(o){t.toggle=o>=n?angular.isDefined(e.get("toggle"))?e.get("toggle")?!0:!1:!0:!1}),t.toggleSidebar=function(){t.toggle=!t.toggle,e.put("toggle",t.toggle)},window.onresize=function(){t.$apply()},o.get("data/WebDeveloperRecrData.json").success(function(e){t.rawData=e}),t.$state=g}angular.module("RDash").controller("MasterCtrl",["$scope","$cookieStore","$http","$state",MasterCtrl]);
angular.module("RDash").controller("OverviewCtrl",["$scope","$rootScope","$filter",function(a,t,e){a.startDate=new Date(a.rawData.start),a.finishDate=new Date(a.rawData.finish);var l={title:{text:""},options:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}}},series:[{type:"pie",name:"",data:[]}]},o=[["Total By Dwell",a.rawData.total_by_dwell,"byDwellConfig"],["Total By Frequency",a.rawData.total_by_freq,"byFreqConfig"],["Total By Dwell Bracket",a.rawData.total_by_dwell_bracket,"byDwellBracketConfig"]];for(i in o){var r=angular.copy(l);r.title.text=o[i][0],r.series[0].name=o[i][0],angular.forEach(o[i][1],function(a,t){this.push([e("capitalize")(t),a])},r.series[0].data),a[o[i][2]]=r}a.charts=['<highchart id="byDwellConfig" config="byDwellConfig"></highchart>','<highchart id="byDwellConfig2" config="byDwellConfig2"></highchart>','<highchart id="byDwellConfig3" config="byDwellConfig3"></highchart>']}]);
angular.module("RDash").controller("PercentageCtrl",["$scope","$filter",function(a,e){var t={title:{text:""},options:{chart:{type:"bar"},xAxis:{categories:[]},yAxis:{max:100,title:{text:"Percent",align:"high"},labels:{overflow:"justify"}},tooltip:{valueSuffix:" %"},legend:{layout:"vertical",align:"right",verticalAlign:"top",floating:!0,borderWidth:1,backgroundColor:Highcharts.theme&&Highcharts.theme.legendBackgroundColor||"#FFFFFF",shadow:!0},plotOptions:{bar:{dataLabels:{enabled:!0,format:"{y} %"}}}},series:[]},r=function(a){for(var t=a.split("_"),i="",r=1;r<t.length;r++)i=i.concat(" ",e("capitalize")(t[r]));return i},o=["percent_qualified_visits","percent_engaged_visits","percent_visits_potential"],n={name:"",data:[],id:""};a.viewBy="types",a.loadGraph=function(){if("types"==a.viewBy){t.title.text="By Types";var e={},s=[];for(i in o){var l=o[i];s.push(r(l));for(j in a.rawData["subloc_"+l])data=a.rawData["subloc_"+l][j],name=r(data[0]),e[name]||(e[name]=[]),e[name].push(data[1])}}else if("subloc"==a.viewBy){t.title.text="By Sub Location";var e={},s=[];for(i in o){var l=o[i],c=r(l);for(j in a.rawData["subloc_"+l])data=a.rawData["subloc_"+l][j],name=r(data[0]),-1==s.indexOf(name)&&s.push(name),e[c]||(e[c]=[]),e[c].push(data[1])}}series=[],angular.forEach(e,function(a,e){var t=angular.copy(n);t.name=e,t.id=e,t.data=a,this.push(t)},series),t.series=series,t.options.xAxis.categories=s},a.highChartsNg=t,a.loadGraph(),a.$watch("viewBy",function(e,t){e!==t&&a.loadGraph()})}]);
function rdLoading(){var d={restrict:"AE",template:'<div class="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'};return d}angular.module("RDash").directive("rdLoading",rdLoading);
function rdWidgetBody(){var d={requires:"^rdWidget",scope:{loading:"@?",classes:"@?"},transclude:!0,template:'<div class="widget-body" ng-class="classes"><rd-loading ng-show="loading"></rd-loading><div ng-hide="loading" class="widget-content" ng-transclude></div></div>',restrict:"E"};return d}angular.module("RDash").directive("rdWidgetBody",rdWidgetBody);
function rdWidgetFooter(){var e={requires:"^rdWidget",transclude:!0,template:'<div class="widget-footer" ng-transclude></div>',restrict:"E"};return e}angular.module("RDash").directive("rdWidgetFooter",rdWidgetFooter);
function rdWidgetTitle(){var e={requires:"^rdWidget",scope:{title:"@",icon:"@"},transclude:!0,template:'<div class="widget-header"><i class="fa" ng-class="icon"></i> {{title}} <div class="pull-right" ng-transclude></div></div>',restrict:"E"};return e}angular.module("RDash").directive("rdWidgetHeader",rdWidgetTitle);
function rdWidget(){var d={transclude:!0,template:'<div class="widget" ng-transclude></div>',restrict:"EA"};return d}angular.module("RDash").directive("rdWidget",rdWidget);